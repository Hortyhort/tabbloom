<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="sidepanel.css">
  <style>
    .plant {
      position: absolute;
      transition:
        transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
        filter 0.3s ease;
      cursor: pointer;
      image-rendering: pixelated;
      will-change: transform, filter;
      transform-origin: center bottom;
    }

    .plant:hover {
      transform: scale(1.4) rotate(5deg) translateY(-12px);
      filter:
        drop-shadow(0 0 25px rgba(255, 220, 150, 0.8))
        drop-shadow(0 0 15px rgba(255, 183, 197, 0.6))
        brightness(1.15);
      z-index: 100;
      animation: magicalPulse 1.5s infinite ease-in-out;
    }

    @keyframes magicalPulse {
      0% {
        filter:
          drop-shadow(0 0 15px rgba(255, 220, 150, 0.5))
          drop-shadow(0 0 10px rgba(255, 183, 197, 0.4))
          brightness(1.1);
      }
      50% {
        filter:
          drop-shadow(0 0 35px rgba(255, 220, 150, 0.9))
          drop-shadow(0 0 25px rgba(255, 183, 197, 0.8))
          brightness(1.2);
      }
      100% {
        filter:
          drop-shadow(0 0 15px rgba(255, 220, 150, 0.5))
          drop-shadow(0 0 10px rgba(255, 183, 197, 0.4))
          brightness(1.1);
      }
    }

    /* Gentle breathing animation - up/down bob with slight rotation */
    @keyframes gentleBreathe {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50%      { transform: translateY(-3px) rotate(0.8deg); }
    }

    /* Subtle left-right sway */
    @keyframes gentleSway {
      0%, 100% { transform: translateX(0); }
      50%      { transform: translateX(2px); }
    }

    /* Combined breathing animation - the garden breathes as one */
    .plant {
      animation:
        gentleBreathe 10s infinite ease-in-out,
        gentleSway 14s infinite ease-in-out;
      animation-delay: calc(var(--plant-index, 0) * 0.3s);
    }

    .plant:hover {
      animation: magicalPulse 1.5s infinite ease-in-out;
    }
  </style>
</head>
<body>
  <div class="garden-container">
    <header class="garden-header">
      <div class="header-main">
        <h1 id="gardenName">My Digital Sanctuary</h1>
        <div class="stats-pills">
          <span class="pill coins">âœ¨ 120</span>
          <span class="pill season">Spring</span>
          <button id="statsBtn" class="pill" title="Garden stats" style="font-size:10px; padding:4px 6px; cursor:pointer;">ğŸ“Š</button>
          <button id="shareBtn" class="pill share-btn" title="Share your garden">ğŸ“¸</button>
          <button id="shareSettingsBtn" class="pill" title="Share settings" style="font-size:10px; padding:4px 6px; cursor:pointer;">âš™ï¸</button>
        </div>
      </div>
    </header>

    <div id="garden-container" style="flex: 1; position: relative; overflow: hidden;">
      <canvas id="garden-canvas"></canvas>
      <div id="tooltip" class="glass-tooltip hidden"></div>

      <!-- Quick Actions Mini-Bar -->
      <div id="quick-actions">
        <button id="quickHarvest" title="Harvest All Dormant">ğŸŒ¾</button>
        <button id="quickRefresh" title="Refresh Garden">ğŸ”„</button>
        <button id="quickShare" title="Share Garden">ğŸ“¸</button>
        <button id="quickSettings" title="Settings">âš™ï¸</button>
      </div>
    </div>

    <footer class="garden-footer">
      <button id="harvestAll" class="harvest-btn">Harvest Dormant Tabs</button>
      <p class="stats-text">47 tabs bloomed this week</p>
    </footer>
  </div>

  <!-- Onboarding Overlay -->
  <div id="onboarding" class="onboarding-overlay hidden">
    <div class="onboarding-card">
      <div class="onboarding-icon">ğŸŒ±</div>
      <h2>Welcome to TabBloom!</h2>
      <p>Your browser tabs are now seeds in a digital garden.</p>
      <ul class="onboarding-tips">
        <li><span>ğŸŒ¸</span> Active tabs bloom beautifully</li>
        <li><span>ğŸ‚</span> Neglected tabs slowly wilt</li>
        <li><span>âœ¨</span> Harvest wilted tabs to earn coins</li>
        <li><span>ğŸ“¸</span> Share your garden with friends</li>
      </ul>
      <button id="onboardingClose" class="onboarding-btn">Start Growing</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <script src="garden.js"></script>
</body>
</html>
